<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Drag</title>


    <style type="text/css">
    body{
      width:100%;
      height: 1520px;;
      border: 1px solid pink;
    }
    .draged_holder{
      width:500px;
      height: 500px;
      border: 1px solid red;
      position:absolute;
    }
    </style>
</head>

<body>
    <div class="draged_holder" draggable="true">drag</div>
      <script src="./jquery-1.9.1.min.js"></script>
    <script>
        (function(window) {
            "use strict";

            var draged_holder = $(".draged_holder");
            var target_container = draged_holder.parent();
            var position= {
              mouseStartX:0,
              mouseStartY:0,
              mouseCurrentX:0,
              mouseCurrentY:0,
              mouseOffsetX:0,
              mouseOffsetY:0,
              mousePreviousX:0,
              mousePreviousX:0
            };
            draged_holder.on("dragstart",function(e){
              //begin drag
              e.originalEvent.dataTransfer.effectAllowed = "move";
              e.originalEvent.dataTransfer.setData("text",e.target.innerHTML);
              // e.originalEvent.dataTransfer.setData(e.target,0,0);
              position.mouseStartX = e.originalEvent.pageX;
              position.mouseStartY = e.originalEvent.pageY;
              position.mousePreviousX = $(this).get(0).offsetLeft;
              position.mousePreviousY = $(this).get(0).offsetTop;
              return true;
            });
            draged_holder.on("dragend",function(e){
              e.originalEvent.dataTransfer.clearData("text");
              return false;
            });
            target_container.on("dragover",function(e){
              //draged element move on targted element
              e.preventDefault();
              return true;
            });
            target_container.on("dragenter",function(e){
              //draged element entered targeted element
              return true;
            });

            target_container.on("drop",function(e){
              position.mouseCurrentX = e.originalEvent.pageX;
              position.mouseCurrentY = e.originalEvent.pageY;
              position.mouseOffsetX = e.originalEvent.pageX - position.mouseStartX +position.mousePreviousX;
              position.mouseOffsetY = e.originalEvent.pageY -position.mouseStartY + position.mousePreviousY;
              $(draged_holder).css({top:position.mouseOffsetY,left:position.mouseOffsetX});
              return true;
            });

        })(window);
    </script>
</body>

</html>
